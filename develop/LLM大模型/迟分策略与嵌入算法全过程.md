ä¸‹é¢å°†ä»åŸç†ã€æµç¨‹åˆ°ç¤ºä¾‹ï¼Œåˆ†æ­¥è¯¦è§£ **Late Chunking** ä¸ **Text Embedding** åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ä¸­çš„å®Œæ•´åº”ç”¨è¿‡ç¨‹ã€‚

------

## ä¸€ã€èƒŒæ™¯ä¸åŠ¨æœº

åœ¨è®¸å¤šä¸‹æ¸¸ä»»åŠ¡ï¼ˆå¦‚è¯­ä¹‰æ£€ç´¢ã€æ–‡æ¡£ç›¸ä¼¼åº¦ã€é—®ç­”ç³»ç»Ÿï¼‰ä¸­ï¼Œå¾€å¾€éœ€è¦å¯¹è¾ƒé•¿æ–‡æœ¬è¿›è¡Œé«˜æ•ˆä¸”è¯­ä¹‰ä¿ç•™è‰¯å¥½çš„å‘é‡åŒ–è¡¨ç¤ºã€‚ä¼ ç»Ÿåšæ³•æ˜¯å…ˆå°†é•¿æ–‡æœ¬åˆ‡åˆ†ä¸ºè‹¥å¹²â€œå—â€ï¼ˆchunkï¼‰ï¼Œå†åˆ†åˆ«å¯¹æ¯å—è¿›è¡Œç¼–ç ï¼ˆæ—©æœŸåˆ‡åˆ†ï¼Œearly chunkingï¼‰ï¼Œä½†è¿™ç§æ–¹å¼å®¹æ˜“ä¸¢å¤±è·¨å—çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œå¯¼è‡´æ£€ç´¢æˆ–å¯¹æ¯”æ•ˆæœä¸‹é™ã€‚
 **Late Chunking** åˆ™æ˜¯åœ¨ç¼–ç åå†åˆ‡åˆ†ï¼Œå°†å…¨å±€ä¸Šä¸‹æ–‡èå…¥æ¯ä¸ªå—çš„è¡¨ç¤ºä¸­ï¼Œä»è€Œå…¼é¡¾äº†é•¿æ–‡æœ¬çš„å…¨å±€è¯­ä¹‰å’Œå±€éƒ¨ç²¾ç»†åº¦ îˆ€citeîˆ‚turn0search0îˆ‚turn0search6îˆã€‚

------

## äºŒã€ä»€ä¹ˆæ˜¯ Late Chunking

- **å®šä¹‰**ï¼šLate Chunking æŒ‡å…ˆä½¿ç”¨æ”¯æŒé•¿ä¸Šä¸‹æ–‡çš„é¢„è®­ç»ƒ Transformer æ¨¡å‹ï¼Œå¯¹æ•´ä¸ªé•¿æ–‡æœ¬ï¼ˆå¯æ•°åƒ Tokenï¼‰ä¸€æ¬¡æ€§è¿›è¡Œå‰å‘è®¡ç®—ï¼Œå¾—åˆ°æ¯ä¸ª Token çš„ä¸Šä¸‹æ–‡æ„ŸçŸ¥åµŒå…¥ï¼›ç„¶åå†æ ¹æ®é¢„è®¾çš„å—å¤§å°å’Œæ­¥é•¿ï¼Œå°†è¿™äº› Token åµŒå…¥â€œåˆ‡åˆ†â€ä¸ºè‹¥å¹²å—ï¼›æœ€åå¯¹æ¯å—å†…çš„ Token åµŒå…¥è¿›è¡Œèšåˆï¼ˆå¦‚å¹³å‡æ± åŒ–ï¼‰ä»¥è·å¾—å—çº§å‘é‡è¡¨ç¤ºã€‚
- **æ ¸å¿ƒä¼˜åŠ¿**ï¼š
  1. **å…¨å±€ä¸Šä¸‹æ–‡**ï¼šæ¯ä¸ª Token åµŒå…¥éƒ½å·²è€ƒè™‘æ•´ä¸ªæ–‡æ¡£çš„ä¿¡æ¯ï¼›
  2. **æ— é¢å¤–è®­ç»ƒ**ï¼šåªéœ€åœ¨åˆ‡åˆ†ä¸æ± åŒ–é˜¶æ®µåšè°ƒæ•´ï¼Œæ— éœ€é¢å¤–å¾®è°ƒï¼›
  3. **å…¼å®¹æ€§å¼º**ï¼šå¯é€‚é…å„ç§é•¿ä¸Šä¸‹æ–‡æ¨¡å‹ï¼ˆå¦‚ Longformerã€Jina Embeddings-v2 ç­‰ï¼‰ã€‚ îˆ€citeîˆ‚turn0search2îˆ‚turn0search3îˆã€‚

------

## ä¸‰ã€Late Chunking çš„æµç¨‹è¯¦è§£

```mermaid
flowchart LR
    A[åŸå§‹é•¿æ–‡æœ¬] --> B[åˆ†è¯ & Tokenize]
    B --> C[é•¿ä¸Šä¸‹æ–‡Transformeræ¨¡å‹]
    C --> D[Tokençº§ä¸Šä¸‹æ–‡åµŒå…¥åºåˆ—]
    D --> E[æŒ‰å—åˆ’åˆ†ï¼šchunk_size & stride]
    E --> F[å—å†…èšåˆï¼šMean/Max Pooling]
    F --> G[å¾—åˆ°æ¯ä¸ªå—çš„å‘é‡è¡¨ç¤º]
```

1. **åˆ†è¯ï¼ˆTokenizationï¼‰**
   - ä½¿ç”¨ä¸æ¨¡å‹åŒ¹é…çš„åˆ†è¯å™¨ï¼ˆå¦‚ WordPieceã€SentencePieceï¼‰å°†æ–‡æœ¬åˆ‡åˆ†ä¸º Token åºåˆ—ã€‚
2. **é•¿ä¸Šä¸‹æ–‡ç¼–ç **
   - å°†æ‰€æœ‰ Token é€å…¥æ”¯æŒé•¿åºåˆ—è¾“å…¥çš„ Transformer æ¨¡å‹ï¼ˆå¦‚ Longformerã€Jina Embeddings-v2ï¼‰ã€‚
   - è¾“å‡ºæ¯ä¸ª Token çš„é«˜ç»´å‘é‡ï¼ˆé€šå¸¸ 768 æˆ– 1024 ç»´ï¼‰ã€‚
3. **åæœŸåˆ‡åˆ†ï¼ˆLate Chunkingï¼‰**
   - è®¾å®šå—å¤§å°ï¼ˆ`chunk_size`ï¼Œå¦‚ 256 Tokenï¼‰å’Œæ­¥é•¿ï¼ˆ`stride`ï¼Œå¦‚ 128 Tokenï¼‰ã€‚
   - åœ¨ Token åµŒå…¥åºåˆ—ä¸Šæ»‘åŠ¨çª—å£ï¼Œåˆ‡å‡ºè‹¥å¹²é‡å æˆ–éé‡å çš„å—ã€‚
4. **èšåˆæ± åŒ–**
   - å¯¹æ¯å—å†…çš„ Token å‘é‡åšå¹³å‡æ± åŒ–ï¼ˆMean Poolingï¼‰æˆ–æœ€å¤§æ± åŒ–ï¼ˆMax Poolingï¼‰ï¼Œå¾—åˆ°è¯¥å—çš„å‘é‡è¡¨ç¤ºã€‚
5. **å­˜å‚¨ä¸æ£€ç´¢**
   - å°†æ‰€æœ‰å—å‘é‡å­˜å…¥å‘é‡æ•°æ®åº“ï¼ˆå¦‚ FAISSã€Weaviateï¼‰ï¼Œç”¨äºåç»­çš„ç›¸ä¼¼åº¦æ£€ç´¢æˆ–ä¸‹æ¸¸ä»»åŠ¡ã€‚ îˆ€citeîˆ‚turn0search4îˆ

------

## å››ã€Text Embeddingï¼ˆæ–‡æœ¬åµŒå…¥ï¼‰æ¦‚è¿°

1. **åµŒå…¥å±‚æ¬¡**
   - **è¯çº§ï¼ˆWord Embeddingï¼‰**ï¼šWord2Vecã€GloVeï¼›
   - **å¥å­/æ®µè½çº§ï¼ˆSentence/Paragraph Embeddingï¼‰**ï¼šSentence-BERTã€Universal Sentence Encoderï¼›
   - **æ–‡æ¡£çº§ï¼ˆDocument Embeddingï¼‰**ï¼šåŸºäº Transformer çš„ CLS Token è¡¨ç¤ºæˆ–æ± åŒ–è¾“å‡ºã€‚
2. **å¸¸ç”¨ç­–ç•¥**
   - **CLS Token**ï¼šå– Transformer è¾“å‡ºçš„ç¬¬ä¸€ä¸ªç‰¹æ®Šæ ‡è®°å‘é‡ï¼›
   - **Mean Pooling**ï¼šå¯¹æ‰€æœ‰ Token åµŒå…¥æ±‚å¹³å‡ï¼›
   - **Max Pooling**ï¼šå¯¹æ‰€æœ‰ç»´åº¦å–æœ€å¤§å€¼ã€‚
3. **é¢„è®­ç»ƒ vs å¾®è°ƒ**
   - **é¢„è®­ç»ƒæ¨¡å‹**ï¼šç›´æ¥ä½¿ç”¨å…¬å¼€æ¨¡å‹ï¼›
   - **å¾®è°ƒ**ï¼šåœ¨ä¸‹æ¸¸æ£€ç´¢æˆ–åˆ†ç±»ä»»åŠ¡ä¸Šåšå¯¹æ¯”å­¦ä¹ ï¼ˆContrastive Learningï¼‰ç­‰ï¼Œä»¥æå‡ç‰¹å®šé¢†åŸŸæ€§èƒ½ã€‚

------

## äº”ã€Late Chunking ä¸ Text Embedding çš„ç»“åˆ

- **ä¼ ç»Ÿæ—©æœŸåˆ‡åˆ†ï¼ˆEarly Chunkingï¼‰**
  - ä¼˜ç‚¹ï¼šå†…å­˜å’Œè®¡ç®—å¼€é”€å°ï¼›
  - ç¼ºç‚¹ï¼šæ¯å—ç‹¬ç«‹ç¼–ç ï¼Œç¼ºå°‘è·¨å—ä¿¡æ¯ï¼Œè¯­ä¹‰æ˜“ç¢ã€‚
- **Late Chunking**
  - é€šè¿‡å…¨å±€ç¼–ç  + ååˆ‡åˆ†ï¼Œæ—¢ä¿ç•™äº†å…¨å±€è¯­ä¹‰ï¼Œä¹Ÿè·å¾—äº†å±€éƒ¨ç»†ç²’åº¦è¡¨ç¤ºï¼Œå°¤å…¶é€‚åˆ**é•¿æ–‡æ¡£æ£€ç´¢**å’Œ**åˆ†æ®µé—®ç­”**åœºæ™¯ã€‚
- **å…¸å‹åº”ç”¨**
  1. **æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰**ï¼šå…ˆæ£€ç´¢ç›¸å…³å—ï¼Œå†æ‹¼æ¥è‡³ç”Ÿæˆæ¨¡å‹ï¼›
  2. **æ–‡æ¡£ç›¸ä¼¼åº¦**ï¼šå—çº§å¯¹æ¯”ï¼Œæ‰¾åˆ°æœ€ç›¸ä¼¼çš„æ–‡æœ¬ç‰‡æ®µï¼›
  3. **æ‘˜è¦ä¸åˆ†ç±»**ï¼šå¯¹æ¯å—åšä¸‹æ¸¸åˆ†ç±»/èšç±»ï¼Œæœ€åæ±‡æ€»ã€‚

------

## å…­ã€ç¤ºä¾‹ä»£ç ï¼ˆPython + Transformersï¼‰

```python
from transformers import AutoTokenizer, AutoModel
import torch
import numpy as np

# 1. å‡†å¤‡æ¨¡å‹ä¸åˆ†è¯å™¨
model_name = "longformer-base-4096"
tokenizer = AutoTokenizer.from_pretrained(model_name)
model = AutoModel.from_pretrained(model_name)

# 2. åˆ†è¯å¹¶ç¼–ç ï¼ˆä¸€æ¬¡æ€§å¤„ç†å…¨æ–‡ï¼‰
text = "è¿™é‡Œæ˜¯ä¸€æ®µå¾ˆé•¿çš„æ–‡æœ¬â€¦â€¦"
inputs = tokenizer(text, return_tensors="pt", truncation=False)
with torch.no_grad():
    outputs = model(**inputs)  # last_hidden_state: (1, L, D)

token_embeddings = outputs.last_hidden_state.squeeze(0)  # (L, D)

# 3. Late Chunking å‚æ•°
chunk_size = 256
stride = 128
embeddings = []
L, D = token_embeddings.shape

# 4. åˆ‡åˆ†ä¸æ± åŒ–
for start in range(0, L, stride):
    end = min(start + chunk_size, L)
    chunk = token_embeddings[start:end]  # (<=chunk_size, D)
    pooled = chunk.mean(dim=0)           # Mean Pooling
    embeddings.append(pooled.numpy())

# embeddings å³ä¸ºå„å—çš„å‘é‡åˆ—è¡¨
embeddings = np.stack(embeddings, axis=0)  # (num_chunks, D)
```

------

## ä¸ƒã€Late Chunking ä¸ Text Embedding çš„ç»“åˆæœº

### âœ… æ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š

```mermaid
flowchart TD
    A[åŸå§‹é•¿æ–‡æ¡£] --> B[æ•´ä½“ Text Embedding ä¸Šä¸‹æ–‡æ„ŸçŸ¥]
    B --> C[Late Chunking: è¯­ä¹‰é©±åŠ¨åˆ‡åˆ†]
    C --> D[æ¯ä¸ª Chunk å•ç‹¬åµŒå…¥]
    D --> E[Embedding å­˜å‚¨ / å‘é‡å¬å›ç³»ç»Ÿ]
```

### ğŸ“ æ­¥éª¤è¯¦è§£ï¼š

#### Step 1ï¼šæ•´ä½“è¯­ä¹‰ç†è§£

ä½¿ç”¨ä¸Šä¸‹æ–‡æ„ŸçŸ¥æ¨¡å‹ï¼ˆå¦‚ BERTã€Longformerã€Jina Embeddingsã€Claude Embeddings ç­‰ï¼‰å¯¹æ•´ä¸ªæ–‡æ¡£è·å–æ•´ä½“è¯­ä¹‰è¡¨ç¤ºï¼š

- æœ‰åŠ©äºæ„å»ºåˆ†å—çš„å…¨å±€ä¸Šä¸‹æ–‡å‚è€ƒã€‚

#### Step 2ï¼šLate Chunking

ä½¿ç”¨ä»¥ä¸‹æ–¹å¼åˆ‡åˆ†ä¸ºè‹¥å¹² chunkï¼š

- è¯­ä¹‰ç›¸ä¼¼æ€§æ£€æµ‹ï¼ˆå¦‚å¥å‘é‡ä½™å¼¦ç›¸ä¼¼åº¦ä¸‹é™ï¼‰
- ä¸»é¢˜è½¬ç§»æ£€æµ‹ï¼ˆå¦‚ LDA åˆ†å¸ƒå˜åŒ–ï¼‰
- å¯¹é½ Markdown æˆ– HTML å±‚çº§ç»“æ„ï¼ˆå¦‚æ ‡é¢˜å±‚çº§ï¼‰

ä¾‹å¦‚å¯ä»¥å®šä¹‰ä¸€ä¸ªè§„åˆ™ï¼š

```python
å½“å¥å­ç›¸é‚»å‘é‡ä½™å¼¦ç›¸ä¼¼åº¦ä½äº 0.75 æ—¶ï¼Œæ–­å¼€ä¸ºæ–° chunk
```

#### Step 3ï¼šæ¯ä¸ª Chunk åµŒå…¥

å¯¹æ¯ä¸ª chunk ä½¿ç”¨æ¨¡å‹åµŒå…¥ï¼ˆé€šå¸¸å…±äº«ä¸€ä¸ªé¢„è®­ç»ƒæ¨¡å‹ï¼‰ï¼š

```text
Chunk 1 â†’ vector1
Chunk 2 â†’ vector2
...
Chunk N â†’ vectorN
```

#### Step 4ï¼šç”¨äºå‘é‡å¬å›æˆ–è¯­ä¹‰æœç´¢

å°†æ‰€æœ‰ Chunk åµŒå…¥å­˜å…¥å‘é‡æ•°æ®åº“ï¼ˆå¦‚ FAISSã€Milvusã€Weaviateï¼‰ï¼Œå®ç°å‘é‡çº§è¯­ä¹‰æœç´¢æˆ–é—®ç­”ç³»ç»Ÿçš„ç²¾ç¡®å¬å›ã€‚                                                                                                                

------

## å…«ã€å¦‚ä½•è¯„ä¼°åµŒå…¥è´¨é‡ï¼šç”¨**å¬å›æ•ˆæœ**ä½“ç°

### ğŸ“ ä»€ä¹ˆæ˜¯å¬å›ï¼Ÿ

åœ¨è¯­ä¹‰æœç´¢ä¸­ï¼Œå¬å›ï¼ˆRecallï¼‰æ˜¯æŒ‡æ¨¡å‹èƒ½å¦ä»æ•°æ®åº“ä¸­æ‰¾åˆ°ä¸ç”¨æˆ· query è¯­ä¹‰æœ€æ¥è¿‘çš„ç›®æ ‡å†…å®¹ã€‚

### ğŸ“Š è¯„ä¼°æŒ‡æ ‡åŒ…æ‹¬ï¼š

| æŒ‡æ ‡                            | å«ä¹‰                                     |
| ------------------------------- | ---------------------------------------- |
| **Recall@k**                    | åœ¨ top-k ç»“æœä¸­æ˜¯å¦åŒ…å«æ­£ç¡®ç­”æ¡ˆ          |
| **MRRï¼ˆMean Reciprocal Rankï¼‰** | æ­£ç¡®ç­”æ¡ˆæ’åœ¨ç¬¬å‡ ä½ï¼Œå–å€’æ•°å¹³å‡           |
| **nDCG**                        | æ­£ç¡®ç»“æœçš„æ’åºç›¸å…³æ€§ï¼ˆè€ƒè™‘ä½ç½®å½±å“ï¼‰     |
| **Embedding ç›¸ä¼¼åº¦åˆ†å¸ƒ**        | ç›¸ä¼¼å¥å¯¹å’Œä¸ç›¸ä¼¼å¥å¯¹ä¹‹é—´çš„ä½™å¼¦ç›¸ä¼¼åº¦å·®è· |

### âœ… è¯„ä¼°æµç¨‹ç¤ºæ„ï¼š

```text
ç»™å®š query: "å¦‚ä½•æé«˜è‹±è¯­å£è¯­æ°´å¹³ï¼Ÿ"
ç›®æ ‡æ–‡æ¡£: åŒ…å«å¤šä¸ªè¯­ä¹‰å—ï¼ˆchunkï¼‰

â†’ æ‰§è¡Œå‘é‡æ£€ç´¢ï¼ˆåŸºäº query çš„åµŒå…¥ï¼‰
â†’ å¬å› top-k æ–‡æ¡£å—
â†’ åˆ¤æ–­æ˜¯å¦å‘½ä¸­ç›¸å…³å†…å®¹å—ï¼ˆhitï¼‰
â†’ è®°å½• hit æ’åï¼ˆrankï¼‰
```

å¯ä»¥ç”¨äººå·¥æ„é€ çš„ QA æˆ–æœç´¢ä»»åŠ¡ï¼Œæ„å»ºæµ‹è¯•é›†ï¼Œæ¯”å¦‚ï¼š

```json
{
  "query": "æ±‰å­—æ˜¯è°å‘æ˜çš„",
  "relevant_chunk": "ç”²éª¨æ–‡çš„å‘ç°è¡¨æ˜ï¼Œæ±‰å­—æœ€æ—©èµ·æºäºå•†ä»£â€¦â€¦"
}
```

------

## ä¹ã€å®é™…åœºæ™¯ä¸­å¦‚ä½•éƒ¨ç½²è¿™å¥—æœºåˆ¶ï¼Ÿ

### âœ… ä½¿ç”¨ Jina AI æˆ– LangChain + FAISS çš„å®Œæ•´ç³»ç»Ÿæ¶æ„ï¼š

```mermaid
graph TD
    A[åŸå§‹é•¿æ–‡æ¡£] --> B[Late Chunkingï¼ˆè¯­ä¹‰åˆ’åˆ†ï¼‰]
    B --> C[Chunk Embeddingï¼ˆåµŒå…¥ç”Ÿæˆï¼‰]
    C --> D[å‘é‡æ•°æ®åº“ï¼ˆå¦‚ FAISSï¼‰]
    E[ç”¨æˆ· Query] --> F[Query Embedding]
    F --> D
    D --> G[Top-k Chunk è¿”å›]
    G --> H[æ˜¾ç¤º or RAG å›ç­”]
```

### âœ… åµŒå…¥æ¨¡å‹æ¨èï¼š

| ç±»å‹       | æ¨¡å‹                                     | ç‰¹ç‚¹               |
| ---------- | ---------------------------------------- | ------------------ |
| é€šç”¨åµŒå…¥   | `sentence-transformers/all-MiniLM-L6-v2` | å¿«é€Ÿã€å°å·§         |
| ä¸­æ–‡è¯­ä¹‰   | `shibing624/text2vec-base-chinese`       | ä¸­æ–‡ä¼˜åŒ–           |
| å¤šè¯­è¨€é•¿æ–‡ | `jinaai/jina-embedding-b-en`             | æ”¯æŒ late chunking |
| é«˜æ€§èƒ½     | `BAAI/bge-large-zh` / `m3e`              | é«˜å¬å›è¡¨ç°         |



## ä¹ã€**Late Chunking** çš„ä¸€ä¸ªè¿›é˜¶æ–¹å¼ â€”â€” **åŸºäºå¥å­è¯­ä¹‰ç›¸ä¼¼åº¦åŠ¨æ€æ–­å¥åˆ†å—**

### **Late Chunking è¿›é˜¶ï¼šåŸºäºå¥å­è¯­ä¹‰ç›¸ä¼¼åº¦çš„åŠ¨æ€æ–­å¥åˆ†å—**

åœ¨è‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰ä»»åŠ¡ä¸­ï¼Œ**Late Chunkingï¼ˆå»¶è¿Ÿåˆ†å—ï¼‰** æ˜¯ä¸€ç§åŠ¨æ€è°ƒæ•´æ–‡æœ¬åˆ†å—çš„æ–¹æ³•ï¼Œç›¸æ¯”ä¼ ç»Ÿçš„å›ºå®šé•¿åº¦åˆ†å—ï¼ˆå¦‚æŒ‰å­—ç¬¦æ•°æˆ–å•è¯æ•°åˆ‡åˆ†ï¼‰ï¼Œå®ƒèƒ½å¤Ÿæ›´å¥½åœ°ä¿ç•™è¯­ä¹‰è¿è´¯æ€§ã€‚è€Œ **åŸºäºå¥å­è¯­ä¹‰ç›¸ä¼¼åº¦çš„åŠ¨æ€æ–­å¥åˆ†å—** åˆ™è¿›ä¸€æ­¥ä¼˜åŒ–äº†åˆ†å—çš„åˆç†æ€§ï¼Œç¡®ä¿æ¯ä¸ªå—å†…çš„å¥å­åœ¨è¯­ä¹‰ä¸Šé«˜åº¦ç›¸å…³ï¼ŒåŒæ—¶åœ¨ä¸åŒå—ä¹‹é—´ä¿æŒè¾ƒä½çš„è¯­ä¹‰ç›¸ä¼¼åº¦ã€‚

------

## **1. ä¼ ç»Ÿåˆ†å—æ–¹æ³•çš„å±€é™æ€§**

- **å›ºå®šé•¿åº¦åˆ†å—ï¼ˆFixed-size Chunkingï¼‰**
  - ä¾‹å¦‚æŒ‰ 512 ä¸ª token åˆ‡åˆ†æ–‡æœ¬ã€‚
  - **é—®é¢˜**ï¼šå¯èƒ½åˆ‡æ–­å¥å­ï¼Œç ´åè¯­ä¹‰è¿è´¯æ€§ã€‚
- **æŒ‰å¥å­åˆ†å‰²ï¼ˆSentence Splittingï¼‰**
  - ä½¿ç”¨æ ‡ç‚¹ç¬¦å·ï¼ˆå¦‚å¥å·ã€é—®å·ï¼‰åˆ‡åˆ†ã€‚
  - **é—®é¢˜**ï¼šçŸ­å¥å­å¯èƒ½å¯¼è‡´ä¿¡æ¯ç¨€ç–ï¼Œé•¿å¥å­å¯èƒ½è¶…å‡ºæ¨¡å‹é™åˆ¶ï¼ˆå¦‚ BERT çš„ 512-token é™åˆ¶ï¼‰ã€‚

------

## **2. åŸºäºè¯­ä¹‰ç›¸ä¼¼åº¦çš„åŠ¨æ€æ–­å¥åˆ†å—**

### **æ ¸å¿ƒæ€æƒ³**

- **è®¡ç®—å¥å­é—´çš„è¯­ä¹‰ç›¸ä¼¼åº¦**ï¼ˆå¦‚ä½¿ç”¨ `sentence-transformers` è®¡ç®—åµŒå…¥å‘é‡ + ä½™å¼¦ç›¸ä¼¼åº¦ï¼‰ã€‚
- **åŠ¨æ€åˆå¹¶ç›¸ä¼¼å¥å­**ï¼Œç›´åˆ°è¾¾åˆ°æœ€å¤§é•¿åº¦é™åˆ¶æˆ–è¯­ä¹‰å˜åŒ–è¾ƒå¤§æ—¶åˆ‡åˆ†ã€‚

### **é€‚ç”¨åœºæ™¯**

- **é•¿æ–‡æœ¬å¤„ç†**ï¼ˆå¦‚æ–‡æ¡£æ‘˜è¦ã€é—®ç­”ç³»ç»Ÿã€RAG åº”ç”¨ï¼‰ã€‚
- **éœ€è¦ä¿æŒè¯­ä¹‰è¿è´¯æ€§çš„ä»»åŠ¡**ï¼ˆå¦‚å¯¹è¯åˆ†æã€ç¯‡ç« ç†è§£ï¼‰ã€‚



## åã€æ€»ç»“ä¸€å¥è¯

> **Late Chunking + Text Embedding æ˜¯æ„å»ºé«˜è´¨é‡ã€ç»“æ„åŒ–ã€å¯å¬å›çš„è¯­ä¹‰ç³»ç»Ÿçš„å…³é”®æŠ€æœ¯è·¯å¾„ï¼Œå¬å›æŒ‡æ ‡åˆ™æ˜¯æœ€ç›´è§‚è¯„ä¼°å…¶åµŒå…¥è´¨é‡çš„æ–¹å¼ã€‚**
